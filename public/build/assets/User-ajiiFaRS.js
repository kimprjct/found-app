import{f as p,i as C,T as F,d as Y,c as _,a as r,u as l,w as N,F as k,o as h,Z as z,b as e,g as i,v as u,r as Q,t as d,n as Z,h as j}from"./app-DeMQ8_Nt.js";import{A as q}from"./AdminLayout-CAIkRf6z.js";import{_ as m}from"./InputError-C-7M1rTZ.js";import{S as v}from"./sweetalert2-z6gKu1nJ.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CCvvxsA1.js";const H={class:"User-content"},J={class:"table-container"},K={class:"controls-container"},O={class:"search-bar"},R={class:"lost-table"},W=["onClick"],X=["onClick"],ee={class:"pagination-controls"},te=["disabled"],se=["disabled"],oe={class:"form-group"},le={class:"form-group"},ne={class:"form-group"},ae={class:"form-group"},re={class:"form-group"},ie={class:"form-group"},ue={class:"form-actions"},de=["disabled"],y=10,me={__name:"User",props:{users:Array},setup(B){const I=B,f=p(""),a=p(1),x=C(()=>I.users.filter(n=>n.role==="user"&&(n.name.toLowerCase().includes(f.value.toLowerCase())||n.email.toLowerCase().includes(f.value.toLowerCase())))),g=C(()=>Math.ceil(x.value.length/y)),P=C(()=>{const n=(a.value-1)*y;return x.value.slice(n,n+y)}),V=()=>{a.value>1&&a.value--},S=()=>{a.value<g.value&&a.value++},A=()=>{a.value=1},b=p(!1),c=p(!1),U=p(null),s=F({userId:"",name:"",department:"",email:"",contactNumber:"",password:""}),D=()=>{b.value=!0,c.value=!0,s.reset()},E=n=>{b.value=!1,c.value=!0,U.value=n,s.userId=n.userId,s.name=n.name,s.department=n.department,s.email=n.email,s.contactNumber=n.contactNumber,s.password=n.password},L=()=>{b.value?s.post(route("user.store"),{onSuccess:()=>{w(),v.fire({title:"Success!",text:"User created.",icon:"success",toast:!0,position:"bottom-center",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,background:"#d6f0ff",color:"#000"})}}):s.patch(route("user.update",U.value.id),{onSuccess:()=>{w(),v.fire({title:"Success!",text:"User updated.",icon:"success",toast:!0,position:"bottom-center",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,background:"#d6f0ff",color:"#000"})}})},w=()=>{c.value=!1,s.reset(),U.value=null},M=n=>{v.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&s.delete(route("user.destroy",n.id),{onSuccess:()=>{v.fire({title:"Deleted!",text:"User  has been deleted.",icon:"success",toast:!0,position:"bottom-center",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,background:"#d6f0ff",color:"#000"})}})})};return(n,t)=>{const T=Y("el-dialog");return h(),_(k,null,[r(l(z),{title:"Admin User"}),r(q,null,{default:N(()=>[e("div",H,[t[9]||(t[9]=e("h2",null,"User",-1)),e("div",J,[e("div",K,[e("div",O,[i(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>f.value=o),placeholder:"Search users...",class:"search-input"},null,512),[[u,f.value]]),e("button",{class:"search-btn",onClick:A},"Search")]),e("button",{class:"add-user-btn",onClick:D},"Add User")]),e("table",R,[t[8]||(t[8]=e("thead",null,[e("tr",null,[e("th",null,"User ID"),e("th",null,"Name"),e("th",null,"Department"),e("th",null,"Email"),e("th",null,"Contact Number"),e("th",null,"Actions")])],-1)),e("tbody",null,[(h(!0),_(k,null,Q(P.value,o=>(h(),_("tr",{key:o.id},[e("td",null,d(o.userId),1),e("td",null,d(o.name),1),e("td",null,d(o.department),1),e("td",null,d(o.email),1),e("td",null,d(o.contactNumber),1),e("td",null,[e("button",{class:"edit-btn",onClick:$=>E(o)},"Edit",8,W),e("button",{class:"delete-btn",onClick:$=>M(o)},"Delete",8,X)])]))),128))])]),e("div",ee,[e("button",{disabled:a.value===1,onClick:V,class:"pagination-btn"}," Previous ",8,te),e("span",null,"Page "+d(a.value)+" of "+d(g.value),1),e("button",{disabled:a.value===g.value,onClick:S,class:"pagination-btn"}," Next ",8,se)])])])]),_:1}),r(T,{modelValue:c.value,"onUpdate:modelValue":t[7]||(t[7]=o=>c.value=o),title:b.value?"Add User":"Edit User",width:"600","before-close":n.handleClose},{default:N(()=>[e("form",{onSubmit:j(L,["prevent"])},[e("div",oe,[t[10]||(t[10]=e("label",{for:"userId"},"User ID",-1)),i(e("input",{type:"text",id:"userId","onUpdate:modelValue":t[1]||(t[1]=o=>l(s).userId=o)},null,512),[[u,l(s).userId]]),r(m,{class:"mt-1",message:l(s).errors.userId},null,8,["message"])]),e("div",le,[t[11]||(t[11]=e("label",{for:"name"},"Name",-1)),i(e("input",{type:"text",id:"name","onUpdate:modelValue":t[2]||(t[2]=o=>l(s).name=o)},null,512),[[u,l(s).name]]),r(m,{class:"mt-1",message:l(s).errors.name},null,8,["message"])]),e("div",ne,[t[12]||(t[12]=e("label",{for:"department"},"Department",-1)),i(e("input",{type:"text",id:"department","onUpdate:modelValue":t[3]||(t[3]=o=>l(s).department=o)},null,512),[[u,l(s).department]]),r(m,{class:"mt-1",message:l(s).errors.department},null,8,["message"])]),e("div",ae,[t[13]||(t[13]=e("label",{for:"email"},"Email:",-1)),i(e("input",{type:"email",id:"email","onUpdate:modelValue":t[4]||(t[4]=o=>l(s).email=o)},null,512),[[u,l(s).email]]),r(m,{class:"mt-1",message:l(s).errors.email},null,8,["message"])]),e("div",re,[t[14]||(t[14]=e("label",{for:"contactNumber"},"Phone Number:",-1)),i(e("input",{type:"text",id:"contactNumber","onUpdate:modelValue":t[5]||(t[5]=o=>l(s).contactNumber=o)},null,512),[[u,l(s).contactNumber]]),r(m,{class:"mt-1",message:l(s).errors.contactNumber},null,8,["message"])]),e("div",ie,[t[15]||(t[15]=e("label",{for:"password"},"Password:",-1)),i(e("input",{type:"password",id:"password","onUpdate:modelValue":t[6]||(t[6]=o=>l(s).password=o)},null,512),[[u,l(s).password]]),r(m,{class:"mt-1",message:l(s).errors.password},null,8,["message"])]),e("div",ue,[e("button",{type:"submit",class:Z(["submit-btn",{"opacity-25":l(s).processing}]),disabled:l(s).processing},"Submit",10,de),e("button",{type:"reset",class:"reset-btn",onClick:w},"close")])],32)]),_:1},8,["modelValue","title","before-close"])],64)}}},Ue=G(me,[["__scopeId","data-v-f0a495d8"]]);export{Ue as default};
